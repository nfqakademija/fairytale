parameters:

services:
    nfq_fairytale.api.security.credential_store:
        class: Nfq\Fairytale\ApiBundle\Security\CredentialStore
        calls:
            - [setAcl, [%nfq_fairytale_api.config.security.acl%]]
            - [setRoleHierarchy, [@security.role_hierarchy]]

    nfq_fairytale.data_source.doctrine.orm.class_factory:
        class: Nfq\Fairytale\ApiBundle\DataSource\ClassFactory

    nfq_fairytale.data_source.orm:
        class: Nfq\Fairytale\ApiBundle\DataSource\DoctrineOrmSource
        calls:
            - [setClassFactory, [@nfq_fairytale.data_source.doctrine.orm.class_factory]]
            - [setEntityManager, [@doctrine.orm.default_entity_manager]]

    nfq_fairytale.data_source.factory:
        class: Nfq\Fairytale\ApiBundle\DataSource\Factory\DataSourceFactory

    nfq_fairytale.action.manager:
        class: Nfq\Fairytale\ApiBundle\Actions\ActionManager

    nfq_fairytale.api.resource_resolver:
        class: Nfq\Fairytale\ApiBundle\Helper\ResourceResolver
        calls:
            - [setResourceMapping, [%nfq_fairytale_api.config.mapping%]]

    nfq_fairytale.api.helper.raw_content_serializer:
        class: Nfq\Fairytale\ApiBundle\Helper\RawContentSerializer
        calls:
            - [setSerializer, [@jms_serializer]]
